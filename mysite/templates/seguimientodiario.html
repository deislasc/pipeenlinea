
{%- extends "base.html" -%}
{%- block content -%}


    <!-- El siguiente Div es para tener un encabezado fijo -->
    <div style="height:84px;  width:100%; overflow-y: scroll; overflow-x: scroll; position: absolute; background-color: #dcdcdc; z-index: 2;">
        
        <div class="botoneraLarga" style="height: 24px; margin-right: 16px;">
            <table width="100%">
                <td align="right">
                    <input type="button" value="IMPRIMIR" onclick="printElem('reporte');">
                </td>   
            </table>
        </div>

        <table  border="1" 
                cellspacing="0"
                id="tablaEncabezadoReporte"
                bgcolor="#dcdcdc"
                style="width: calc(100% - 16px);">
                <tr style="height: 54px;">
                    {%- for campo in headers -%}
                    <th style="font-weight: bold; font-size: 12px;">
                        {{campo}}
                    </th>
                    {%-endfor-%}      
               </tr>
        </table>

    </div>

      
    
    
    <div id="reporte" style="height:calc(100% - 32px); overflow-y: scroll; top: 24px; position: absolute; z-index:1;" > 

            <table style="word-wrap: break-word; 
                                    font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif; 
                                    font-size: 24px;
                                    font-weight: bold;
                                    background-color:#ffffff;
                                    text-align: center;
                                    display: none;" 
                    border="2" 
                    cellspacing="0" 
                    width="100%"
                    >
                <tr>
                    <td width="150px" style="text-align: center; vertical-align: middle;" ><img src="{{ url_for('static', filename='img/Logo_MiPymex.jpg') }}" alt=""
                        style="width: 140px; height: auto;"></td>
                    <td>SEGUIMIENTO DIARIO</td>
                </tr>
            </table>  
            
            <table id="tablaReporte" border="0" cellspacing="0" style="width: calc(100% - 6px);">
                <tr style="height: 60px;">
                    {%- for campo in headers -%}
                    <th style="font-weight: bold; font-size: 12px; 
                               background-color:#dcdcdc; 
                               border: 1px solid #000000;">
                        {{campo}}
                    </th>
                    {%-endfor-%}      
                </tr>
               {%- for registro in listaRegistros-%}
                    <tr>
                        
                          
                         {%- set registro_anterior=loop.previtem -%} 
                         {%- set registro_indice=loop.index -%}  
                        
                        {%- for campo in headers -%}
                            {%- set indice_columna=loop.index -%}

                            <td style="font-size: 14px;
                                text-align: left;
                                white-space: nowrap;
                                padding-left: 0px;
                                padding-right: 7px;
                                {%- if campo=='DIAS TRANSCURRIDOS' -%}
                                color:{{registro['color']}};
                                background-color:{{registro['bgcolor']}};
                                {%- endif -%}
                                {%- if registro_indice == 1 -%} 
                                    border-top: 1px solid #777777;
                                {%- endif -%}

                                {%- if indice_columna == 1 -%} 
                                    border-bottom: 1px solid #777777;
                                    border-right: 1px solid #777777;
                                    background-color:#dcdcdc;
                                {%- endif -%}
                                {%-if indice_columna==2-%}
                                    font-weight: bold;
                                {%-else-%}
                                    font-weight: lighter;
                                {%- endif -%}
                                {%-if campo == 'MONTO SOLICITADO'-%}
                                    text-align: right;
                                {%-endif-%}
                                {%-if campo == 'DIAS TRANSCURRIDOS'-%}
                                    text-align: center;
                                {%-endif-%}

                                {%- if registro_indice > 1 -%}    
                                        {%-if registro_anterior is defined -%} 
                                            
                                                {%- if registro[campo] != registro_anterior[campo]
                                                or loop.index > 6 -%} 
                                                    border-top: 1px solid #777777;
                                                        {%-else-%}
                                                        {%- set  campo_prev = headers[indice_columna-2] -%}

                                                        {%-if registro[campo_prev] != registro_anterior[campo_prev] -%}       
                                                            border-top: 1px solid #777777;

                                                        {%-endif-%} 
                                                {%- endif -%}
                                            
                                        {%- endif -%}
                                {%- endif -%} 
                                " >  
                                    {%-if loop.index==1-%}
                                        {{registro_indice}}
                                    {%-endif-%}
                                    {%- if registro_indice == 1 -%}
                                         {{registro[campo]}}
                                    {%-endif-%}
                                    {%- if registro_indice > 1 -%}    
                                        {%-if registro_anterior is defined-%} 
                                            {%- if loop.index <= 6 -%}
                                                {%-if registro[campo] != registro_anterior[campo] -%}       
                                                        {{registro[campo]|replace("//","<br/>")|safe}}   
                                                
                                                    {%-else-%}
                                                        {%- set  campo_prev = headers[indice_columna-2] -%}

                                                        {%-if registro[campo_prev] != registro_anterior[campo_prev] -%}       
                                                            {{registro[campo]}} 
                                                        {%-endif-%} 

                                                {%- endif -%}


                                            
                                            {%- endif -%}


                                        {%- endif -%}
                                    {%- endif -%} 
                                    {%- if (registro_indice>1 and loop.index > 6 )-%}
                                        {{registro[campo]}}
                                    {%- endif -%}

                            </td>
                        {%-endfor-%}  
                    </tr>

               {%- endfor-%}
           </table>
    </div>

    
{%- endblock -%}




 